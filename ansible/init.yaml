---
- name: Initialise via Ansible
  hosts: localhost
  become: yes
  tasks:
  - name: Install packages
    package:
      name: "{{ item }}"
      state: present
    with_items: "{{ pkgs }}"
  - name: Copy Ansible service config
    template: 
      src=ansible.service
      dest=/lib/systemd/system/ansible.service
      mode=644
  - name: Reload systemctl to re-read configs
    systemd:
      name: ansible.service
      daemon_reload: yes
      state: started 
      enabled: yes 
      masked: no
  - name: Copy ProFTPD service config
    template:
      src=proftpd-jobCache.conf
      dest=/etc/proftpd/conf.d/jobCache.conf
  - name: Restarting ProFTPD
    systemd:
      name: proftpd.service
      state: restarted
